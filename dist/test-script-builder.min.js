angular.module("test-script-builder",["ui.router","ui.ace"]).config(["$urlRouterProvider",function(e){"use strict";e.otherwise("/")}]),angular.module("test-script-builder").factory("Templates",function(){return{jasmine:{init:"var ptor;",testSpec:"describe('[0]', function () {[1]});",testCase:"it('[0]', function () {[1]});",beforeEach:"beforeEach(function () {\n		browser.get('[0]');\n		ptor = protractor.getInstance();\n		ptor.ignoreSynchronization = true;\n		browser.driver.manage().window().setSize([1], [2]);\n		ptor.sleep(2000);\n	});",clickById:"element(by.id('[0]')).click();",clickByPath:"element(by.xpath('[0]')).click();",fillFieldById:"element(by.id('[0]')).sendKeys('[1]');",fillFieldByPath:"element(by.xpath('[0]')).sendKeys('[1]');",expectById:"expect(element(by.id('[0]')).getText()).toMatch('[1]');",expectByPath:"expect(element(by.xpath('[0]')).getText()).toMatch('[1]');",expectCountByPath:"expect(element.all(by.xpath('[0]')).count()).toBe([1]);",expectElementPresentById:"expect(ptor.isElementPresent(by.id('[0]'))).toBe(true);",expectElementPresentByPath:"expect(ptor.isElementPresent(by.xpath('[0]'))).toBe(true);",sleep:"ptor.sleep([0]);"},mocha:{},selenium:{}}}),angular.module("test-script-builder").factory("String",function(){return{format:function(e,t,n,i,s,r){var a=[];return t&&a.push(t.toString()),n&&a.push(n.toString()),i&&a.push(i.toString()),s&&a.push(s.toString()),r&&a.push(r.toString()),e.replace(/\[(\d+)\]/g,function(e,t){return a[1*t]})}}}),angular.module("test-script-builder").factory("TestSpec",["String","Templates",function(e,t){"use strict";var n=function(){this.name,this.id,this.url="",this.testcases=[]};return n.prototype.buildScript=function(){if(0==this.testcases.length)return"";var n=t.jasmine,i="\n"+n.init+"\n",s="	"+e.format(n.beforeEach,this.url,1200,1500);return i+=s,angular.forEach(this.testcases,function(t){var s="	";t.events&&angular.forEach(t.events,function(t){s+="\n		","click"===t.type&&"text"!==t.tag?t.element_id?s+=e.format(n.clickById,t.element_id):t.element_path&&(s+=e.format(n.clickByPath,t.element_path)):"fill"===t.type&&"text"===t.tag?t.element_id?s+=e.format(n.fillFieldById,t.element_id,t.element_value):t.element_path&&(s+=e.format(n.fillFieldByPath,t.element_path,t.element_value)):"expect"===t.type&&(t.element_value?t.element_id?s+=e.format(n.expectById,t.element_id,t.element_value):t.element_path&&(s+=e.format(n.expectByPath,t.element_path,t.element_value)):t.element_id?s+=e.format(n.expectElementPresentById,t.element_id):t.element_path&&(s+=e.format(n.expectElementPresentByPath,t.element_path))),t.sleep&&t.sleep>0&&(s+="\n		"+e.format(n.sleep,t.sleep))}),s+="\n	",s=e.format(n.testCase,t.name,s),i+="\n	"+s}),i+="\n",i=e.format(n.testSpec,this.name,i)},n}]),angular.module("test-script-builder").factory("TestCase",function(){"use strict";var e=function(){this.name,this.id,this.events=[],this.isNew=!0,this.isStarted=!1,this.expectMode=!1};return e}),angular.module("test-script-builder").factory("Event",function(){"use strict";var e=function(e,t){this.type,this.tag,this.element_id,this.element_path,this.element_value,this.sleep,this.expected_value,e&&this.init(e,t)};return e.prototype.init=function(e){this.type=e.event.toLowerCase(),this.tag=e.tag.toLowerCase(),e.data&&(this.element_id=e.data.id,e.data.path&&(this.element_path=e.data.path.toLowerCase()),e.data.value&&(this.element_value=e.data.value.trim()))},e}),function(){function e(e){function t(){function t(t,s){if(s)throw new Error("Eval failed for "+i,s.value);t?e():n()}var i="window.__inspectedWindowLoaded";chrome.devtools.inspectedWindow.eval(i,t)}function n(){setTimeout(t,200)}n()}e.prototype={injectedScript:function(){window.__inspectedWindowLoaded=!1,window.__hightlight_color="red",window.addEventListener("load",function(){window.__inspectedWindowLoaded=!0,window.__captureEvents=!0})}},window.InspectedWindow=window.InspectedWindow||{},InspectedWindow.LoadMonitor=e}(),angular.module("test-script-builder").filter("reverse",function(){return function(e){return e.slice().reverse()}}),angular.module("test-script-builder").controller("PanelCtrl",["$scope","$window","Event","TestCase","TestSpec",function(e,t,n,i,s){"use strict";e.testScript="",e.scriptMode=!1,e.testSpec=new s,e.testCase=new i,e.startCapture=function(){e.testCase.isStarted=!e.testCase.isStarted,e.testCase.isStarted?(t._scope=t.angular.element(document.getElementById("panelContainer")).scope(),t.__startCapturing()):e.cancelCapture()},e.cancelCapture=function(){e.testCase.isStarted=!1,e.testCase.expectMode=!1,t.__respond("stop")},e.setExpectMode=function(){e.testCase.expectMode=!e.testCase.expectMode,e.testCase.expectMode?t.__respond("expect"):t.__respond("record")},e.onMessage_received=function(t){0===e.testSpec.url.length&&t.url&&(e.testSpec.url=t.url);var i=new n(t);("click"!==i.type||"text"!==i.tag)&&(e.testCase.events.push(i),e.$apply())},e.newTestCase=function(){e.testCase=new i},e.showTestCase=function(t){e.testCase=t},e.saveTestCase=function(){if(!e.testCase.id){e.testCase.id=(65536*(1+Math.random())).toString(5);{angular.copy(e.testCase)}e.testSpec.testcases.push(e.testCase)}e.cancelCapture(),e.testCase=new i},e.deleteEvent=function(t){e.testCase.events.splice(t,1)},e.deleteTestCase=function(t){e.testSpec.testcases.splice(t,1)},e.showScript=function(){e.scriptMode=!e.scriptMode,e.testScript=e.testSpec.buildScript()}}]),function(){window.__onStarted=function(){window.__respond("record")},window.__startCapturing=function(){var e=new InspectedWindow.LoadMonitor(window.__onStarted),t={ignoreCache:!0,userAgent:void 0,injectedScript:"("+e.injectedScript+")()",preprocessingScript:void 0};chrome.devtools.inspectedWindow.reload(t)}}(),function(e){try{e=angular.module("test-script-builder")}catch(t){e=angular.module("test-script-builder",[])}e.run(["$templateCache",function(e){e.put("/test-script-builder/todo/todo.html","")}])}();